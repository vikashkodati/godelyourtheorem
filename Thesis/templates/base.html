<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
            <script type="text/javascript" src="gmaps.js">

      var infowindow, map;
      function initialize() {
        var mapDiv = document.getElementById('map-canvas');
        map = new google.maps.Map(mapDiv, {
          center: new google.maps.LatLng(40.740, -74.18),
          zoom: 12,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });
      
        var content = '<strong>I am a shared info window!</strong>';
      
        infowindow = new google.maps.InfoWindow({
          content: content
        });
      
        google.maps.event.addListenerOnce(map, 'idle', addMarkers);
      }
      
      function addMarkers() {
        var bounds = map.getBounds();
        var southWest = bounds.getSouthWest();
        var northEast = bounds.getNorthEast();
        var lngSpan = northEast.lng() - southWest.lng();
        var latSpan = northEast.lat() - southWest.lat();
        for (var i = 0; i < 5; i++) {
          var latLng = new google.maps.LatLng(southWest.lat() + latSpan * Math.random(),
                                              southWest.lng() + lngSpan * Math.random());
          var marker = new google.maps.Marker({
            position: latLng,
            map: map
          });
      
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, this);
          });
        }
      }
      

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
        
    <title>
    {% block title %}
    {% endblock %}
    </title>
    </head>
    <body>
        {% block content %}
            <p>Index page</p>
            {% if not user.is_authenticated %}
            	<a href="/accounts/login/">login</a> | 
            	<a href="/accounts/register/">register</a>
            {% endif %}
			{% if user.is_authenticated %}
			{% block signed_in %}
				<a href="/accounts/logout/">logout</a>
			{% endblock %}
    		{% endif %}
        {% endblock %}
    </body>
</html>